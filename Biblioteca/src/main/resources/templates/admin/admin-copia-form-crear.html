<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head
    th:replace="~{fragments/head :: head(titulo=${formMode} == 'editar' ? 'Editar Copia - Administración' : 'Nueva Copia - Administración')}"
  >
    <title
      th:text="${formMode} == 'editar' ? 'Editar Copia - Administración' : 'Nueva Copia - Administración'"
    >
      Nueva Copia - Administración
    </title>
  </head>
  <body>
    <!-- ...navbar... -->
    <main class="container">
      <div class="row g-4 mt-4">
        <!-- Encabezado -->
        <div class="col-12">
          <div class="card card-soft mb-3">
            <div
              class="card-body d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3"
            >
              <div>
                <p class="section-title mb-1">Copias / Ejemplares</p>
                <h1 class="h4 mb-2">Crear copia</h1>
                <p class="mb-0 text-soft-muted">
                  Completá los datos para crear una nueva copia.
                </p>
              </div>
              <div class="text-md-end">
                <a
                  href="/admin/copias"
                  class="btn btn-outline-secondary btn-sm"
                >
                  <i class="bi bi-arrow-left me-1"></i>Volver al listado
                </a>
              </div>
            </div>
          </div>
        </div>
        <!-- Formulario principal -->
        <div class="col-lg-8">
          <div class="card card-soft">
            <div class="card-body">
              <p class="section-title mb-3">Datos de la copia</p>
              <form
                th:object="${copiaForm}"
                action="/admin/copias"
                method="post"
                class="row g-3"
              >
                <div class="col-12">
                  <label for="idLibro" class="small-label mb-1"
                    >Libro al que pertenece</label
                  >
                  <select
                    id="idLibro"
                    th:field="*{idLibro}"
                    class="form-select"
                    required
                  >
                    <option
                      value=""
                      disabled
                      th:selected="${copiaForm.idLibro == null}"
                    >
                      Seleccioná un libro
                    </option>
                    <option
                      th:each="libro : ${libros}"
                      th:value="${libro.id}"
                      th:text="${libro.titulo + ' (ID ' + libro.id + ')'}"
                    >
                      Libro
                    </option>
                  </select>

                  <div class="form-text text-soft-muted mt-1 small">
                    La copia queda asociada a este libro. Más adelante el
                    sistema marcará si esta copia está prestada o disponible.
                  </div>
                </div>
                <div class="divider-soft"></div>
                <!-- Botones -->
                <div class="col-12 d-flex flex-wrap gap-2">
                  <button type="submit" class="btn btn-primary">
                    <i class="bi bi-check2-circle me-1"></i>Guardar cambios
                  </button>
                  <a href="/admin/copias" class="btn btn-outline-secondary"
                    ><i class="bi bi-x-lg me-1"></i>Cancelar</a
                  >
                </div>
              </form>
            </div>
          </div>
        </div>
        <!-- Columna derecha: explicación -->
        <div class="col-lg-4">
          <div class="card card-soft-light">
            <div class="card-body">
              <p class="section-title mb-2">¿Qué es una copia?</p>
              <ul class="list-unstyled small text-soft-muted mb-0">
                <li>
                  • Cada copia representa un ejemplar físico de un libro en la
                  biblioteca.
                </li>
                <li>
                  • Si tenés 3 unidades del mismo título, deberías crear 3
                  copias asociadas al mismo libro.
                </li>
                <li>
                  • El estado (disponible, prestada) se determina a partir de
                  los préstamos activos, no se carga desde acá.
                </li>
                <li>
                  • Antes de crear una copia, asegurate de que el libro ya
                  exista en el catálogo.
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
