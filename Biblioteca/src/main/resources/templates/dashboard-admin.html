<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head(titulo='Dashboard Administrador - Biblioteca')}">
    <title>Dashboard Administrador - Biblioteca</title>
</head>
<body>

<!-- Navbar con user menu -->
<nav class="navbar navbar-main">
    <div class="container d-flex align-items-center justify-content-between">
        <a class="navbar-brand text-white" href="#" th:href="@{/admin/dashboard}">
            BIBLIOTECA
        </a>

        <div class="d-flex align-items-center gap-3">
            <a class="nav-link active text-white" href="#" th:href="@{/admin/dashboard}">Dashboard</a>
            <a class="nav-link nav-link-muted" href="#" th:href="@{/admin/usuarios}">Usuarios</a>
            <a class="nav-link nav-link-muted" href="#" th:href="@{/admin/configuracion}">Configuración</a>
            <a class="nav-link nav-link-muted" href="#" th:href="@{/admin/reportes}">Reportes</a>

            <!-- User menu fragment -->
            <div th:replace="~{fragments/user-menu :: userMenu(usuario=${#authentication?.principal?.usuario ?: null}, rol='Administrador')}"></div>
        </div>
    </div>
</nav>

<main class="container">
    <div class="row g-4 mt-4">

        <!-- Encabezado -->
        <div class="col-12">
            <div class="card card-soft mb-3">
                <div class="card-body">
                    <p class="section-title mb-1">Panel de Administrador</p>
                    <h1 class="h4 mb-2">
                        Gestión del sistema bibliotecario
                    </h1>
                    <p class="mb-0 text-soft-muted">
                        Desde aquí podés gestionar usuarios, configuraciones y obtener reportes del sistema.
                    </p>
                </div>
            </div>
        </div>

        <!-- Estadísticas generales -->
        <div class="col-12">
            <div class="card card-soft-light mb-3">
                <div class="card-body">
                    <p class="section-title mb-3">Estadísticas del sistema</p>

                    <div class="row g-3">
                        <div class="col-6 col-lg-3">
                            <div class="card card-soft p-3">
                                <div class="small-label">Total lectores</div>
                                <div class="highlight-number" th:text="${estadisticas?.totalLectores ?: 156}">156</div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-3">
                            <div class="card card-soft p-3">
                                <div class="small-label">Total libros</div>
                                <div class="highlight-number" th:text="${estadisticas?.totalLibros ?: 1245}">1245</div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-3">
                            <div class="card card-soft p-3">
                                <div class="small-label">Préstamos totales</div>
                                <div class="highlight-number" th:text="${estadisticas?.prestamosHistoricos ?: 3891}">3891</div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-3">
                            <div class="card card-soft p-3">
                                <div class="small-label">Usuarios activos</div>
                                <div class="highlight-number" th:text="${estadisticas?.usuariosActivos ?: 12}">12</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Acciones administrativas -->
        <div class="col-lg-8">
            <div class="card card-soft mb-3">
                <div class="card-body">
                    <p class="section-title mb-3">Acciones administrativas</p>

                    <div class="row g-3">
                        <div class="col-12 col-md-6">
                            <a href="/admin/usuarios/nuevo" class="quick-action-card"
                               th:href="@{/admin/usuarios/nuevo}">
                                <span class="quick-action-icon">
                                    <i class="bi bi-person-plus"></i>
                                </span>
                                <div>
                                    <p class="quick-action-title mb-0">Nuevo usuario</p>
                                    <p class="quick-action-subtitle">
                                        Crear cuentas para bibliotecarios
                                    </p>
                                </div>
                            </a>
                        </div>

                        <div class="col-12 col-md-6">
                            <a href="/admin/reportes" class="quick-action-card"
                               th:href="@{/admin/reportes}">
                                <span class="quick-action-icon">
                                    <i class="bi bi-graph-up"></i>
                                </span>
                                <div>
                                    <p class="quick-action-title mb-0">Generar reportes</p>
                                    <p class="quick-action-subtitle">
                                        Estadísticas y análisis del sistema
                                    </p>
                                </div>
                            </a>
                        </div>

                        <div class="col-12 col-md-6">
                            <a href="/admin/configuracion" class="quick-action-card"
                               th:href="@{/admin/configuracion}">
                                <span class="quick-action-icon">
                                    <i class="bi bi-gear"></i>
                                </span>
                                <div>
                                    <p class="quick-action-title mb-0">Configuración</p>
                                    <p class="quick-action-subtitle">
                                        Ajustar parámetros del sistema
                                    </p>
                                </div>
                            </a>
                        </div>

                        <div class="col-12 col-md-6">
                            <a href="/admin/respaldos" class="quick-action-card"
                               th:href="@{/admin/respaldos}">
                                <span class="quick-action-icon">
                                    <i class="bi bi-database"></i>
                                </span>
                                <div>
                                    <p class="quick-action-title mb-0">Respaldos</p>
                                    <p class="quick-action-subtitle">
                                        Gestionar copias de seguridad
                                    </p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Información del sistema -->
        <div class="col-lg-4">
            <div class="card card-soft-light">
                <div class="card-body">
                    <p class="section-title mb-2">Información del sistema</p>
                    <ul class="list-unstyled small mb-0 text-soft-muted">
                        <li>• Versión: 1.0.0</li>
                        <li>• Base de datos: H2 (desarrollo)</li>
                        <li>• Última actualización: <span th:text="${#temporals.format(#temporals.createNow(), 'dd/MM/yyyy')}">01/01/2025</span></li>
                        <li>• Tiempo de actividad: <span th:text="${sistemaInfo?.tiempoActividad ?: '2h 45m'}">2h 45m</span></li>
                    </ul>

                    <div class="mt-3">
                        <a href="/admin/logs" class="btn btn-outline-secondary btn-sm"
                           th:href="@{/admin/logs}">
                            <i class="bi bi-file-text me-1"></i>
                            Ver logs del sistema
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</main>

</body>
</html>
