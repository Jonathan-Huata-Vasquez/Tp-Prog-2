<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: head(titulo='Home Lector - Biblioteca')}"></head>
<body>

<div th:replace="~{fragments/navbar-lector :: navbarLector('home')}"></div>

<main class="container">
    <div class="row g-4 mt-4">

        <!-- Bienvenida -->
        <div class="col-12">
            <div class="card card-soft">
                <div class="card-body d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                    <div class="mb-3 mb-md-0">
                        <p class="section-title mb-1">Panel de lector</p>
                        <h1 class="h3 mb-2">
                            Hola,
                            <span th:text="${#authentication.principal.nombreCompleto}">Juan P√©rez</span> üëã
                        </h1>
                        <p class="mb-0 text-soft-muted">
                            Desde aqu√≠ pod√©s consultar el cat√°logo y revisar los pr√©stamos que la biblioteca registr√≥ a tu nombre.
                        </p>
                    </div>
                    <div class="text-md-end">
            <span class="badge-estado"
                  th:if="${!bloqueado}">Cuenta activa ¬∑ Sin bloqueos</span>
                        <span class="badge-estado"
                              th:if="${bloqueado}"
                              th:text="'Bloqueado hasta ' + ${#temporals.format(bloqueadoHasta, 'dd/MM/yyyy')}">Bloqueado</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Columna principal -->
        <div class="col-lg-8">
            <div class="card card-soft-light mb-4">
                <div class="card-body">
                    <p class="section-title mb-2">Explorar cat√°logo</p>
                    <h2 class="h5 mb-3">Busc√° libros por t√≠tulo, autor o tema</h2>

                    <form th:action="@{/catalogo/buscar}" method="get" class="row g-2 align-items-center">
                        <div class="col-12 col-md-8">
                            <label for="q" class="visually-hidden">Buscar en cat√°logo</label>
                            <input type="text" id="q" name="q" class="form-control form-control-lg"
                                   placeholder="Ej: 'Cien a√±os de soledad' o 'historia argentina'">
                        </div>
                        <div class="col-12 col-md-4 d-grid d-md-block">
                            <button type="submit" class="btn btn-primary btn-lg w-100">
                                <i class="bi bi-search me-1"></i> Buscar en cat√°logo
                            </button>
                        </div>
                    </form>

                    <div class="mt-3 d-flex flex-column flex-sm-row gap-2">
                        <a th:href="@{/catalogo}" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-book-half me-1"></i> Ver todo el cat√°logo
                        </a>
                        <a th:href="@{/lector/prestamos}" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-journal-check me-1"></i> Ver mis pr√©stamos
                        </a>
                    </div>

                    <div class="mt-3">
                        <p class="small text-soft-muted mb-0">
                            Us√° el buscador para encontrar libros. El personal de biblioteca es quien registra o actualiza tus pr√©stamos.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <div class="card card-soft-light mb-4">
                <div class="card-body">
                    <p class="section-title mb-2">Tu resumen</p>

                    <div class="mb-3">
                        <p class="mb-1 text-soft-muted small text-uppercase fw-semibold">Pr√©stamos activos</p>
                        <p class="highlight-number mb-0" th:text="${prestamosActivos}">2</p>
                    </div>

                    <div class="mb-3">
                        <p class="mb-1 text-soft-muted small text-uppercase fw-semibold">Pr√≥ximo vencimiento</p>
                        <p class="mb-0" th:text="${proximoVencimiento != null ? #temporals.format(proximoVencimiento,'dd/MM/yyyy') : '-'}">15/11/2025</p>
                        <p class="small text-warning mb-0">
                            <i class="bi bi-exclamation-triangle me-1"></i> Record√° devolverlo a tiempo en el mostrador.
                        </p>
                    </div>

                    <div class="d-grid">
                        <a th:href="@{/lector/prestamos}" class="btn btn-outline-primary">
                            <i class="bi bi-journal-text me-1"></i> Ver detalle de mis pr√©stamos
                        </a>
                    </div>
                </div>
            </div>

            <div class="card border-0 bg-transparent text-soft-muted">
                <div class="card-body px-0">
                    <p class="section-title mb-2">Reglas de la biblioteca</p>
                    <ul class="list-unstyled small mb-0">
                        <li>‚Ä¢ Hasta 5 pr√©stamos activos por lector.</li>
                        <li>‚Ä¢ Cada pr√©stamo vence a los 21 d√≠as desde su registro.</li>
                        <li>‚Ä¢ Los atrasos generan d√≠as de bloqueo en tu cuenta de lector.</li>
                        <li>‚Ä¢ Los pr√©stamos se gestionan en el mostrador por el personal.</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</main>

</body>
</html>
