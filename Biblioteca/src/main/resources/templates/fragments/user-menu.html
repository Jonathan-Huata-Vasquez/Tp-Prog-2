<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Fragment de menú de usuario con <details> -->
<details th:fragment="userMenu(nombre, rol, iniciales)" class="user-menu ms-2">
    <summary class="d-flex align-items-center gap-2">
        <span class="user-avatar" th:text="${iniciales ?: 'AB'}">AB</span>
    </summary>
    <div class="user-menu-dropdown">
        <div class="user-menu-header">
            <div class="user-menu-name" th:text="${nombre ?: 'Usuario'}">Ana Bibliotecaria</div>
            <div class="user-menu-role" th:text="${'Rol: ' + (rol ?: 'Usuario')}">Rol: Bibliotecario</div>
        </div>

        <div class="user-menu-divider"></div>

        <a th:href="@{/perfil}" class="user-menu-link">
            <i class="bi bi-person-badge"></i>
            <span>Ver perfil</span>
        </a>

        <form th:action="@{/logout}" method="post" style="margin: 0;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit" class="user-menu-link" style="border: none; background: none; width: 100%;">
                <i class="bi bi-box-arrow-right"></i>
                <span>Cerrar sesión</span>
            </button>
        </form>
    </div>
</details>

</body>
</html>