<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Navbar específica para bibliotecarios -->
<nav th:fragment="navbarBibliotecario(activeSection)" class="navbar navbar-main">
  <div class="container d-flex align-items-center justify-content-between">
    <a class="navbar-brand text-white" href="#" th:href="@{/dashboard/bibliotecario}">
        BIBLIOTECA
    </a>

    <div class="d-flex align-items-center gap-3">
        <a class="nav-link" 
           th:classappend="${activeSection == 'home'} ? 'active text-white' : 'nav-link-muted'"
           href="#" th:href="@{/dashboard/bibliotecario}">Inicio</a>
        <a class="nav-link"
           th:classappend="${activeSection == 'prestamos'} ? 'active text-white' : 'nav-link-muted'"
           href="#" th:href="@{/bibliotecario/prestamos}">Préstamos</a>
        <a class="nav-link"
           th:classappend="${activeSection == 'lectores'} ? 'active text-white' : 'nav-link-muted'"
           href="#" th:href="@{/bibliotecario/lectores}">Lectores</a>
        <a class="nav-link"
           th:classappend="${activeSection == 'catalogo'} ? 'active text-white' : 'nav-link-muted'"
           href="#" th:href="@{/bibliotecario/catalogo}">Catálogo</a>

        <!-- Menú usuario -->
        <details class="user-menu ms-2">
            <summary class="d-flex align-items-center gap-2">
                <span class="user-avatar"
                      th:text="${#authentication?.principal?.nombreCompleto != null ? #authentication.principal.nombreCompleto.substring(0,1) + (#authentication.principal.nombreCompleto.split(' ').length > 1 ? #authentication.principal.nombreCompleto.split(' ')[1].substring(0,1) : '') : 'AB'}">
                    AB
                </span>
            </summary>
            <div class="user-menu-dropdown">
                <div class="user-menu-header">
                    <div class="user-menu-name"
                         th:text="${#authentication?.principal?.nombreCompleto ?: 'Ana Bibliotecaria'}">
                        Ana Bibliotecaria
                    </div>
                    <div class="user-menu-role">
                        Rol: Bibliotecario
                    </div>
                </div>

                <div class="user-menu-divider"></div>

                <a href="#" class="user-menu-link" th:href="@{/bibliotecario/perfil}">
                    <i class="bi bi-person-badge"></i>
                    <span>Ver perfil</span>
                </a>

                <a href="#" class="user-menu-link" th:href="@{/logout}">
                    <i class="bi bi-box-arrow-right"></i>
                    <span>Cerrar sesión</span>
                </a>
            </div>
        </details>
  </div>
</nav>

</body>
</html>